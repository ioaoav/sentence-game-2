<!DOCTYPE html>
<html lang="zh-HK">
<head>
<meta charset="UTF-8">
<title>å››è¦ç´ å¥ç·´ç¿’éŠæˆ²</title>
<style>
body { font-family: "Microsoft JhengHei", sans-serif; background: #fffbe6; padding: 20px; text-align: center; }
h1 { color: #ff6b6b; }
.container { max-width: 900px; margin: 0 auto; }
.slots { display: flex; justify-content: center; gap: 20px; margin: 40px 0; }
.slot { width: 180px; height: 80px; border: 3px dashed #4ecdc4; border-radius: 15px; display: flex; align-items: center; justify-content: center; font-size: 24px; background: white; }
.words { display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; margin: 30px 0; }
.word { padding: 15px 25px; background: #ffe66d; border-radius: 15px; cursor: grab; font-size: 22px; user-select: none; }
.word:active { cursor: grabbing; }
#sentence { font-size: 32px; margin: 40px; color: #2a9d8f; min-height: 60px; }
#check { padding: 15px 40px; font-size: 24px; background: #ff9ff3; border: none; border-radius: 15px; cursor: pointer; }
.correct { background: #95f095 !important; }
.wrong { background: #ff8b94 !important; }
</style>
</head>
<body>

<h1>å››è¦ç´ å¥å¤§æŒ‘æˆ°ï¼</h1>
<div class="container">

  <div class="slots">
    <div class="slot" id="time">æ™‚é–“</div>
    <div class="slot" id="person">äººç‰©</div>
    <div class="slot" id="place">åœ°é»</div>
    <div class="slot" id="action">äº‹æƒ…</div>
  </div>

  <div id="sentence">æ“ºå¥½å››æ¨£å˜¢å°±ç‡åˆ°å¥å­å•¦ï¼</div>

  <div class="words" id="wordBank"></div>

  <button id="check">æª¢æŸ¥ç­”æ¡ˆ</button>
  <button onclick="newGame()">ä¸‹ä¸€é¡Œ</button>

</div>

<script>
// é¡Œåº«ï¼ˆéš¨æ™‚åŠ å¤šå•²ï¼‰
const questions = [
  { time: "æ˜¨å¤©æ—©ä¸Š", person: "å°æ˜åŒå¦¹å¦¹", place: "æµ·æ´‹å…¬åœ’", action: "åéå±±è»Š", answer: "æ˜¨å¤©æ—©ä¸Šï¼Œå°æ˜åŒå¦¹å¦¹åœ¨æµ·æ´‹å…¬åœ’åéå±±è»Šã€‚" },
  { time: "ä»Šå¤©ä¸‹åˆ", person: "åª½å’ª", place: "è¶…ç´šå¸‚å ´", action: "è²·èœ", answer: "ä»Šå¤©ä¸‹åˆï¼Œåª½å’ªåœ¨è¶…ç´šå¸‚å ´è²·èœã€‚" },
  { time: "ä¸Šå€‹æ˜ŸæœŸæ—¥", person: "å½¼å¾—åŒçˆ¸çˆ¸", place: "è¿ªå£«å°¼æ¨‚åœ’", action: "ç‡ç…™èŠ±", answer: "ä¸Šå€‹æ˜ŸæœŸæ—¥ï¼Œå½¼å¾—åŒçˆ¸çˆ¸åœ¨è¿ªå£«å°¼æ¨‚åœ’ç‡ç…™èŠ±ã€‚" },
  { time: "åƒé£¯ä¹‹å¾Œ", person: "æˆ‘", place: "å­¸æ ¡æ“å ´", action: "è¸¢è¶³çƒ", answer: "åƒé£¯ä¹‹å¾Œï¼Œæˆ‘åœ¨å­¸æ ¡æ“å ´è¸¢è¶³çƒã€‚" },
  { time: "è–èª•ç¯€", person: "å…¨å®¶äºº", place: "å±±é ‚", action: "å½±éšç›¸", answer: "è–èª•ç¯€ï¼Œå…¨å®¶äººåœ¨å±±é ‚å½±éšç›¸ã€‚" },
  { time: "å‰›æ‰", person: "è€å¸«", place: "èª²å®¤", action: "è¬›æ•…äº‹", answer: "å‰›æ‰ï¼Œè€å¸«åœ¨èª²å®¤è¬›æ•…äº‹ã€‚" }
];

let currentQ;

function newGame() {
  currentQ = questions[Math.floor(Math.random() * questions.length)];
  
  // æ¸…ç©ºä½ç½®
  document.querySelectorAll('.slot').forEach(s => {
    s.textContent = s.id === "time" ? "æ™‚é–“" : s.id === "person" ? "äººç‰©" : s.id === "place" ? "åœ°é»" : "äº‹æƒ…";
    s.classList.remove("correct","wrong");
  });
  
  document.getElementById('sentence').textContent = "æ“ºå¥½å››æ¨£å˜¢å°±ç‡åˆ°å¥å­å•¦ï¼";
  
  // æ´—ç‰Œ
  const words = [currentQ.time, currentQ.person, currentQ.place, currentQ.action];
  words.sort(() => Math.random() - 0.5);
  
  const bank = document.getElementById('wordBank');
  bank.innerHTML = "";
  words.forEach(w => {
    const div = document.createElement('div');
    div.className = "word";
    div.textContent = w;
    div.draggable = true;
    div.ondragstart = drag;
    div.onclick = () => clickToSlot(div); // æ”¯æ´é»æ“Š
    bank.appendChild(div);
  });
}

function allowDrop(ev) { ev.preventDefault(); }

function drag(ev) { ev.dataTransfer.setData("text", ev.target.textContent); }

function drop(ev) {
  ev.preventDefault();
  const data = ev.dataTransfer.getData("text");
  if (ev.target.classList.contains('slot') && (ev.target.textContent === "æ™‚é–“" || ev.target.textContent === "äººç‰©" || ev.target.textContent === "åœ°é»" || ev.target.textContent === "äº‹æƒ…")) {
    ev.target.textContent = data;
    ev.target.classList.remove("correct","wrong");
    removeFromBank(data);
    showSentence();
  }
}

function clickToSlot(wordDiv) {
  const emptySlot = [...document.querySelectorAll('.slot')].find(s => 
    s.textContent === "æ™‚é–“" || s.textContent === "äººç‰©" || s.textContent === "åœ°é»" || s.textContent === "äº‹æƒ…");
  if (emptySlot) {
    emptySlot.textContent = wordDiv.textContent;
    wordDiv.remove();
    showSentence();
  }
}

function removeFromBank(text) {
  const bank = document.getElementById('wordBank').children;
  for (let el of bank) {
    if (el.textContent === text) el.remove();
  }
}

function showSentence() {
  const t = document.getElementById('time').textContent;
  const p = document.getElementById('person').textContent;
  const l = document.getElementById('place').textContent;
  const a = document.getElementById('action').textContent;
  if (t !== "æ™‚é–“" && p !== "äººç‰©" && l !== "åœ°é»" && a !== "äº‹æƒ…") {
    document.getElementById('sentence').textContent = t + "ï¼Œ" + p + "åœ¨" + l + a + "ã€‚";
  }
}

document.querySelectorAll('.slot').forEach(s => {
  s.ondrop = drop;
  s.ondragover = allowDrop;
});

document.getElementById('check').onclick = () => {
  const t = document.getElementById('time').textContent;
  const p = document.getElementById('person').textContent;
  const l = document.getElementById('place').textContent;
  const a = document.getElementById('action').textContent;
  
  if (t === currentQ.time && p === currentQ.person && l === currentQ.place && a === currentQ.action) {
    document.querySelectorAll('.slot').forEach(s => s.classList.add('correct'));
    document.getElementById('sentence').textContent = "å®Œå…¨å•±ï¼å¥½å»ä»”ï¼ğŸ‰";
  } else {
    document.querySelectorAll('.slot').forEach(s => s.classList.add('wrong'));
  }
};

newGame(); // é–‹å§‹ç¬¬ä¸€é¡Œ
</script>
</body>
</html>